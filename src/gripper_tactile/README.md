# Gripper Tactile Simulator Logic

## 1. Physical Model

The simulation models a robotic gripper with three anthropomorphic fingers arranged 120 degrees apart.

### Finger Anatomy
Each finger consists of 3 rigid bodies (phalanxes) connected by joints, mimicking the human finger structure:
1.  **Proximal Phalanx**: Connected to the palm via the **MCP (Metacarpophalangeal) joint**.
2.  **Intermediate Phalanx**: Connected to the proximal phalanx via the **PIP (Proximal Interphalangeal) joint**.
3.  **Distal Phalanx**: Connected to the intermediate phalanx via the **DIP (Distal Interphalangeal) joint**.

### Joint Dynamics
- **Joint Type**: `btHingeConstraint`.
- **Actuation**: Joints are actuated using angular motors (servos) to achieve target angles for grasping.
- **Compliance**: Springs are used to provide compliance, allowing the fingers to conform to the object shape.

## 2. Tactile Sensing

The "neural" tactile data is generated by measuring the reaction forces and torques at **all 3 joints (MCP, PIP, DIP)** of the finger.

- **Sensor Location**: The constraints connecting the phalanxes (Palm-Proximal, Proximal-Intermediate, Intermediate-Distal).
- **Data**: 
    - **Force (Fx, Fy, Fz)**: Linear reaction forces for each joint.
    - **Torque (Mx, My, Mz)**: Angular reaction torques for each joint.
- **Interpretation**: These values represent the mechanical stress experienced by the finger, analogous to signals from mechanoreceptors at the base of a biological whisker or finger.

## 3. Simulation Logic (Pickup Sequence)

The simulation follows a state machine to perform a pickup task:

1.  **IDLE**: Gripper is positioned above the object. Fingers are open and parallel to the ground.
2.  **DESCEND**: Gripper moves down towards the object.
3.  **GRASP**: Fingers close (actuate MCP/PIP/DIP joints) to secure the object.
4.  **LIFT**: Gripper moves up, lifting the object.
5.  **HOLD**: Gripper holds the object in the air.
6.  **RELEASE**: Fingers open, dropping the object.

Note: The fingers are arranged in a circle to grasp the object from all sides.

## 4. Control Interface

- `Gripper::update(dt)`: Updates the state machine and joint controllers.
- `Gripper::setTarget(pos)`: Moves the palm to a target position.
- `Gripper::setGrasp(amount)`: Controls the finger closing (0.0 = open, 1.0 = closed).

## 5. Usage

To build and run the simulation:

```bash
cd build
cmake ..
make gripper_tactile
./bin/gripper_tactile
```

The simulation will open a window showing the gripper performing the pickup task. The console will output the current state and tactile force readings from the distal joint.

